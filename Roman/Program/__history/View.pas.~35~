unit View;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, API_Parse, Vcl.StdCtrls, Vcl.Grids;

type
  TRomanView = class(TViewParse)
    procedure btnStartClick(Sender: TObject);
  private
    { Private declarations }
    procedure InitMVC; override;
    procedure SetParsers; override;
    procedure AfterControllerCreate; override;
  public
    { Public declarations }
  end;

var
  RomanView: TRomanView;

implementation

{$R *.dfm}

uses
    Controller
   ,Model_2GISNew
   ,Model_TripAdvisor
   ,Model_Wiki;

procedure TRomanView.AfterControllerCreate;
begin
  SendViewMessage('GetParsersLastState');
end;

procedure TRomanView.SetParsers;
var
 Parser: TParserInfo;
begin
  Parser.Name:='2gis.ru';
  Parser.Num:=1;
  FParsersList:=FParsersList+[Parser];

  Parser.Name:='tripadvisor.ru';
  Parser.Num:=2;
  FParsersList:=FParsersList+[Parser];

  Parser.Name:='wikipedia.org';
  Parser.Num:=3;
  FParsersList:=FParsersList+[Parser];
end;

procedure TRomanView.btnStartClick(Sender: TObject);
begin
  inherited;

  //if ParsersGrid.Row=1 then SendViewMessage('start 2gis');
  //if ParsersGrid.Row=2 then SendViewMessage('StartTripadvisor');
  //if ParsersGrid.Row=3 then SendViewMessage('start wiki');
end;

procedure TRomanView.InitMVC;
begin
  // указываем основной класс контроллера
  FControllerClass := TController;
end;

end.
